<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mongo="http://www.springframework.org/schema/data/mongo"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/data/mongo
       http://www.springframework.org/schema/data/mongo/spring-mongo.xsd">

    <mongo:mongo host="${properties.data.mongodb.host}"
                 port="${properties.data.mongodb.port}">
        <mongo:options connections-per-host="${properties.data.mongodb.connections.per.host}"
                       threads-allowed-to-block-for-connection-multiplier="${properties.data.mongodb.threads.allowed.to.block.for.connection.multiplier}"
                       connect-timeout="${properties.data.mongodb.connect.timeout}"
                       max-wait-time="${properties.data.mongodb.max.wait.time}"
                       auto-connect-retry="${properties.data.mongodb.auto.connect.retry}"
                       socket-keep-alive="${properties.data.mongodb.socket.keep.alive}"
                       socket-timeout="${properties.data.mongodb.socket.timeout}"
                       slave-ok="${properties.data.mongodb.slave.ok}"
                       write-number="${properties.data.mongodb.write.number}"
                       write-timeout="${properties.data.mongodb.write.timeout}"
                       write-fsync="${properties.data.mongodb.write.fsync}"/>
    </mongo:mongo>

    <mongo:db-factory username="${properties.data.mongodb.username}"
                      password="${properties.data.mongodb.password}"
                      dbname="${properties.data.mongodb.database}"
                      mongo-ref="mongo"/>

    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
    </bean>

</beans>